---
// src/components/ContactForm.astro
import { useState } from 'react';

// Function to handle form submission
const handleSubmit = async (event) => {
  event.preventDefault();
  const formData = new FormData(event.target);
  const data = Object.fromEntries(formData.entries());

  // Replace 'YOUR_GOOGLE_APPS_SCRIPT_URL' with your actual Google Apps Script URL
  try {
    await fetch('YOUR_GOOGLE_APPS_SCRIPT_URL', {
      method: 'POST',
      mode: 'no-cors', // Important since Google Apps Script does not support CORS
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    });
    alert('Form submitted successfully');
  } catch (error) {
    console.error('Error submitting form:', error);
    alert('Error submitting the form.');
  }
};
---

<form id="wf-form-Contact-form" name="wf-form-Contact-form" data-name="Contact form" class="form-block" aria-label="Contact form" onSubmit={handleSubmit}>
  <input class="form-field w-input" maxlength="256" name="First-Name" placeholder="Prenume" type="text" required />
  <input class="form-field w-input" maxlength="256" name="Last-Name" placeholder="Nume" type="text" required />
  <input class="form-field w-input" maxlength="256" name="Form-Email" placeholder="E-mail" type="email" required />
  <input class="form-field w-input" maxlength="256" name="Form-Phone" placeholder="Nr de Telefon" type="tel" required />
  <select id="Patient" name="Patient" required class="form-field is-select w-select">
    <option value="">Tip Pacient</option>
    <option value="New patient">Pacient Nou</option>
    <option value="Existing patient">Pacient Existent</option>
  </select>
  <textarea placeholder="Mesaj" id="Message" name="Message" required class="form-field is-text-area w-input"></textarea>
  <label class="w-checkbox checkbox-field">
    <input type="checkbox" name="Terms-And-Conditions" required style="opacity:0;position:absolute;z-index:-1" />
    <span class="checkbox-label w-form-label">Sunt de acord cu <a href="/termeni-si-conditii" class="form-checkbox-link">Termenii de utilizare</a></span>
  </label>
  <label class="w-checkbox checkbox-field">
    <input type="checkbox" name="Subscribe-To-Newsletter" required style="opacity:0;position:absolute;z-index:-1" />
    <span class="checkbox-label w-form-label">Ma abonez la newsletter</span>
  </label>
  <input type="submit" data-wait="Sending..." class="form-submit-button w-button" value="Programeaza Consultatia" />
</form>
